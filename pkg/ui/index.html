<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups" />
  <style>
    body {
      font-family: 'Barlow Condensed', sans-serif;
    }
    .status-button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <button class="status-button" onclick="fetchStatus()">Check Status</button>
  <div id="statusResult"></div>

  <script>
    function fetchStatus() {
      fetch('/filter:filter:template.os/status', {
        method: 'POST', // Specify the method to use
        headers: {
          'Content-Type': 'application/json' // Specify the content type
        },
        body: JSON.stringify({}) // Send an empty object as the body
      })
      .then(response => {
        console.log("Raw response:", response);
        return response.text(); // Changed from response.json() to response.text() to handle plain text response
      })
      .then(data => {
        document.getElementById('statusResult').innerText = `Status: ${data}`; // Adjusted to properly display the plain text response
      })
      .catch(error => {
        console.error("Failed to fetch status:", error);
      });
    }
  </script>
</body>

</html>
